import{_ as t,c as s,o as a,a4 as e}from"./chunks/framework.BjiR7zK0.js";const b=JSON.parse('{"title":"部署流程","description":"","frontmatter":{},"headers":[],"relativePath":"docs/operation/deploy.md","filePath":"docs/operation/deploy.md","lastUpdated":1715998632000}'),i={name:"docs/operation/deploy.md"},n=e(`<h1 id="部署流程" tabindex="-1">部署流程 <a class="header-anchor" href="#部署流程" aria-label="Permalink to &quot;部署流程&quot;">​</a></h1><blockquote><p>部署流程是工作流的起始，所有工作流业务的展开都依赖于流程模型的定义。</p></blockquote><h2 id="注入流程引擎" tabindex="-1">注入流程引擎 <a class="header-anchor" href="#注入流程引擎" aria-label="Permalink to &quot;注入流程引擎&quot;">​</a></h2><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FlowLongEngine flowLongEngine;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="部署流程-1" tabindex="-1">部署流程 <a class="header-anchor" href="#部署流程-1" aria-label="Permalink to &quot;部署流程&quot;">​</a></h2><blockquote><p>支持根据 <code>资源文件</code> <code>输入流</code> <code>JSON模型文本</code> 三种方式部署流程。</p></blockquote><ul><li>根据<code>资源文件</code>部署流程</li></ul><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 返回 流程定义ID 用于后续发起流程实例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Long processId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">processService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deployByResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test/model.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, testCreator, repeat);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>参数说明</p></blockquote><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>resourceName</td><td>资源名称（一般指项目 resource 目录下文件）</td></tr><tr><td>flowCreator</td><td>流程任务部署者</td></tr><tr><td>repeat</td><td>是否重复部署 true 存在版本+1新增一条记录 false 存在流程直接返回</td></tr></tbody></table><ul><li>根据<code>输入流</code>部署流程</li></ul><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Long processId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">processService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(input, testCreator, repeat);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>参数说明</p></blockquote><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>input</td><td>流程定义输入流 java.io.InputStream</td></tr><tr><td>flowCreator</td><td>流程任务部署者</td></tr><tr><td>repeat</td><td>是否重复部署 true 存在版本+1新增一条记录 false 存在流程直接返回</td></tr></tbody></table><ul><li>根据<code>JSON模型文本</code>部署流程</li></ul><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Long processId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">processService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(jsonString, testCreator, repeat);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>参数说明</p></blockquote><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>jsonString</td><td>流程定义json字符串</td></tr><tr><td>flowCreator</td><td>流程任务部署者</td></tr><tr><td>repeat</td><td>是否重复部署 true 存在版本+1新增一条记录 false 存在流程直接返回</td></tr></tbody></table><h2 id="卸载流程" tabindex="-1">卸载流程 <a class="header-anchor" href="#卸载流程" aria-label="Permalink to &quot;卸载流程&quot;">​</a></h2><blockquote><p>卸载指定的定义流程，更新为未启用状态</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ok </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">processService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">undeploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>参数说明</p></blockquote><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>流程定义ID</td></tr></tbody></table><h2 id="其它操作方法" tabindex="-1">其它操作方法 <a class="header-anchor" href="#其它操作方法" aria-label="Permalink to &quot;其它操作方法&quot;">​</a></h2><blockquote><p>工作流模型的其它操作方法介绍，更多细节查看源码。</p></blockquote><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>updateType</td><td>更新流程定义的类别</td></tr><tr><td>getProcessById</td><td>根据主键ID获取流程定义对象</td></tr><tr><td>getProcessByVersion</td><td>根据流程名称或版本号查找流程定义对象</td></tr><tr><td>getProcessByVersion</td><td>根据流程定义KEY或版本号查找流程定义对象</td></tr><tr><td>getProcessByKey</td><td>根据流程定义KEY查找流程定义对象</td></tr><tr><td>cascadeRemove</td><td>级联删除指定流程定义的所有数据（谨慎使用！！！不可恢复）</td></tr></tbody></table>`,26),d=[n];function l(r,p,o,h,k,c){return a(),s("div",null,d)}const g=t(i,[["render",l]]);export{b as __pageData,g as default};
