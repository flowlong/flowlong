import{_ as a,c as i,a2 as e,o as n}from"./chunks/framework.DXaKt7EB.js";const l="/imgs/variables.png",E=JSON.parse('{"title":"流程数据传输","description":"","frontmatter":{},"headers":[],"relativePath":"docs/dataTransfer.md","filePath":"docs/dataTransfer.md","lastUpdated":1751190546000}'),t={name:"docs/dataTransfer.md"};function p(d,s,h,o,c,r){return n(),i("div",null,s[0]||(s[0]=[e('<h1 id="流程数据传输" tabindex="-1">流程数据传输 <a class="header-anchor" href="#流程数据传输" aria-label="Permalink to &quot;流程数据传输&quot;">​</a></h1><blockquote><p>流程执行中需要传递 <code>临时变量</code> <code>任务变量</code> <code>实例变量（全局变量）</code> 用于判断执行路径。</p></blockquote><h2 id="传输流程图" tabindex="-1">传输流程图 <a class="header-anchor" href="#传输流程图" aria-label="Permalink to &quot;传输流程图&quot;">​</a></h2><blockquote><p>数据传输分为 <code>特殊变量传输</code> 和 <code>流程变量传输</code> 两种流程图如下。</p></blockquote><img src="'+l+`"><h2 id="流程变量传输" tabindex="-1">流程变量传输 <a class="header-anchor" href="#流程变量传输" aria-label="Permalink to &quot;流程变量传输&quot;">​</a></h2><blockquote><p>实例任务变量通过相关方法 <code>args</code> 参数传递，该参数以 <code>json字符串</code> 的格式存放到表 <code>flw_task</code> <code>flw_his_task</code> <code>flw_instance</code> <code>flw_his_instance</code> 中的 <code>variable</code> 字段。</p></blockquote><div class="warning custom-block"><p class="custom-block-title">提示！</p><p>任务 <code>flw_task</code> <code>flw_his_task</code> 为局部变量，实例 <code>flw_instance</code> <code>flw_his_instance</code> 为全局变量。</p></div><h2 id="特殊变量传输" tabindex="-1">特殊变量传输 <a class="header-anchor" href="#特殊变量传输" aria-label="Permalink to &quot;特殊变量传输&quot;">​</a></h2><blockquote><p>特殊变量传输，是流程执行节点的操作，主要实现类 <code>FlowDataTransfer</code> 静态方法定义操作方法。 用于在流程引擎内部无方法参数形式传递执行变量，基于 <code>ThreadLocal</code> 实现参数传递。</p></blockquote><ul><li>案例：查看测试用例 <code>TestModel.testDynamicAssignee()</code> 传输动态节点处理人</li></ul><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FlowDataTransfer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dynamicAssignee</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HashMap&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;() {{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 节点动态分配处理人</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nodeName, DynamicAssignee.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assigneeUserList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(assigneeList));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>可用在业务中处理跨方法同一个线程的参数传递</li></ul><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置参数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FlowDataTransfer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;参数&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, 变量对象);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取变量</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Object value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FlowDataTransfer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;参数&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">提示！</p><p>动态分配处理人，可用在发起流程的时候动态分配。 数据传输在不破坏现有现有接口及跨方法传输的情况下是非常完美有效的传参方式。</p></div>`,15)]))}const u=a(t,[["render",p]]);export{E as __pageData,u as default};
