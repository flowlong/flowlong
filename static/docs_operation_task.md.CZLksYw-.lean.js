import{_ as a,c as e,a2 as s,o as d}from"./chunks/framework.DXaKt7EB.js";const k=JSON.parse('{"title":"审批任务","description":"flowlong 工作流 task 审批任务","frontmatter":{"title":"审批任务","editLink":true,"description":"flowlong 工作流 task 审批任务"},"headers":[],"relativePath":"docs/operation/task.md","filePath":"docs/operation/task.md","lastUpdated":1751123490000}'),i={name:"docs/operation/task.md"};function r(n,t,l,o,h,p){return d(),e("div",null,t[0]||(t[0]=[s('<h1 id="审批任务" tabindex="-1">审批任务 <a class="header-anchor" href="#审批任务" aria-label="Permalink to &quot;审批任务&quot;">​</a></h1><blockquote><p>审批任务，是流程执行节点的操作，主要实现类 <code>TaskService</code> 接口定义操作方法。</p></blockquote><ul><li>注入 <code>FlowLongEngine</code> 引擎实例</li></ul><div class="warning custom-block"><p class="custom-block-title">提示！</p><p>业务层调用该方法时，请务必保证事务一致性例如 <code>SpringBoot</code> 使用 <code> @Transactional(rollbackFor = Exception.class)</code> 方法注解</p></div><h2 id="审批同意" tabindex="-1">审批同意 <a class="header-anchor" href="#审批同意" aria-label="Permalink to &quot;审批同意&quot;">​</a></h2><blockquote><p>待审批任务，执行任务处理，并返回下一个处理节点。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">executeTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taskId, flowCreator, args);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>当前任务ID</td></tr><tr><td>flowCreator</td><td>当前处理人</td></tr><tr><td>args</td><td>任务参数，可存放临时变量</td></tr></tbody></table><h2 id="审批拒绝" tabindex="-1">审批拒绝 <a class="header-anchor" href="#审批拒绝" aria-label="Permalink to &quot;审批拒绝&quot;">​</a></h2><blockquote><p>拒绝当前任务，默认返回上一级节点，节点模型 <code>NodeModel</code> 可配置：驳回策略 <code>rejectStrategy</code> 属性， 驳回重新审批策略 <code>rejectStart</code> 属性。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">executeRejectTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(flwTask, nodeKey, flowCreator, args, termination)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>当前任务ID</td></tr><tr><td>nodeKey</td><td>跳转的节点key，如果设置为空，则默认返回上一级节点，如果设置为任意节点，则跳转到指定节点</td></tr><tr><td>flowCreator</td><td>当前处理人</td></tr><tr><td>args</td><td>任务参数，可存放临时变量</td></tr><tr><td>termination</td><td>是否终止流程，该参数为 <code>true</code> 时，其它驳回策略无效</td></tr></tbody></table><ul><li>节点模型 <code>NodeModel</code> 模型策略</li></ul><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>rejectStrategy</td><td>驳回策略 1，驳回到发起人，2，驳回到上一节点，3，驳回到指定节点 4，终止审批流程 5，驳回到模型父节点</td></tr><tr><td>rejectStart</td><td>驳回重新审批策略 1，继续往下执行 2，回到上一个节点</td></tr></tbody></table><h2 id="转办任务" tabindex="-1">转办任务 <a class="header-anchor" href="#转办任务" aria-label="Permalink to &quot;转办任务&quot;">​</a></h2><blockquote><p>指定任务ID <code>taskId</code> 转办给指定处理人 <code>assigneeFlowCreator</code>。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">taskService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">transferTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taskId, flowCreator, assigneeFlowCreator, args)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>当前任务ID</td></tr><tr><td>flowCreator</td><td>当前处理人</td></tr><tr><td>assigneeFlowCreator</td><td>指定办理人</td></tr><tr><td>args</td><td>任务参数，可存放临时变量</td></tr></tbody></table><h2 id="委派任务" tabindex="-1">委派任务 <a class="header-anchor" href="#委派任务" aria-label="Permalink to &quot;委派任务&quot;">​</a></h2><blockquote><p>指定任务ID <code>taskId</code> 代理人办理完任务该任务重新归还给原处理人 <code>assigneeFlowCreator</code>。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">taskService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delegateTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taskId, flowCreator, assigneeFlowCreator, args)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>当前任务ID</td></tr><tr><td>flowCreator</td><td>当前处理人</td></tr><tr><td>assigneeFlowCreator</td><td>指定办理人</td></tr><tr><td>args</td><td>任务参数，可存放临时变量</td></tr></tbody></table><h2 id="撤回任务" tabindex="-1">撤回任务 <a class="header-anchor" href="#撤回任务" aria-label="Permalink to &quot;撤回任务&quot;">​</a></h2><blockquote><p>撤回指定任务ID <code>taskId</code> 该任务后续任务未执行前有效。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">taskService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withdrawTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taskId, flowCreator)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>当前任务ID</td></tr><tr><td>flowCreator</td><td>当前处理人</td></tr></tbody></table><h2 id="唤醒任务" tabindex="-1">唤醒任务 <a class="header-anchor" href="#唤醒任务" aria-label="Permalink to &quot;唤醒任务&quot;">​</a></h2><blockquote><p>唤醒指定实例ID <code>instanceId</code> 默认最后一个节点，如果指定 <code>nodeKey</code> 节点，则跳转到指定节点。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">taskService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(instanceId, nodeKey, flowCreator)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>当前实例ID</td></tr><tr><td>nodeKey</td><td>节点key历史任务</td></tr><tr><td>flowCreator</td><td>当前处理人</td></tr></tbody></table><h2 id="创建抄送任务" tabindex="-1">创建抄送任务 <a class="header-anchor" href="#创建抄送任务" aria-label="Permalink to &quot;创建抄送任务&quot;">​</a></h2><blockquote><p>指定任务模型 <code>taskModel</code> 创建抄送任务 <code>flwTask</code> 抄送给 <code>ccUserList</code>。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createCcTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taskModel, flwTask, ccUserList, flowCreator)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskModel</td><td>任务模型</td></tr><tr><td>flwTask</td><td>当前任务</td></tr><tr><td>ccUserList</td><td>抄送任务分配到任务的人或角色列表</td></tr><tr><td>flowCreator</td><td>任务创建者</td></tr></tbody></table><h2 id="指定代理人" tabindex="-1">指定代理人 <a class="header-anchor" href="#指定代理人" aria-label="Permalink to &quot;指定代理人&quot;">​</a></h2><blockquote><p>指定任务ID <code>taskId</code> 指定代理人 <code>agentFlowCreators</code> 第一个人为主办 <code>assignorId</code> 其他人为协办 <code>assignor</code> 多个英文逗号分隔。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">taskService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">agentTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taskId, flowCreator, agentFlowCreators, args)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>当前任务ID</td></tr><tr><td>flowCreator</td><td>当前处理人</td></tr><tr><td>agentFlowCreators</td><td>指定代理人列表</td></tr><tr><td>args</td><td>任务参数，可存放临时变量</td></tr></tbody></table><h2 id="跳转到任意节点" tabindex="-1">跳转到任意节点 <a class="header-anchor" href="#跳转到任意节点" aria-label="Permalink to &quot;跳转到任意节点&quot;">​</a></h2><blockquote><p>指定任务ID <code>taskId</code> 跳转到 <code>nodeKey</code> 节点位置。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">executeJumpTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taskId, nodeKey, flowCreator, args)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>当前任务ID</td></tr><tr><td>nodeKey</td><td>跳转的节点key</td></tr><tr><td>flowCreator</td><td>当前处理人</td></tr><tr><td>args</td><td>任务参数，可存放临时变量</td></tr></tbody></table><h2 id="执行追加节点模型" tabindex="-1">执行追加节点模型 <a class="header-anchor" href="#执行追加节点模型" aria-label="Permalink to &quot;执行追加节点模型&quot;">​</a></h2><blockquote><p>指定任务ID <code>taskId</code> 所在节点 <code>nodeModel</code> 追加节点模型。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">executeAppendNodeModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taskId, nodeModel, flowCreator, args, beforeAfter)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>当前任务ID</td></tr><tr><td>nodeModel</td><td>节点模型</td></tr><tr><td>flowCreator</td><td>当前处理人</td></tr><tr><td>args</td><td>任务参数，可存放临时变量</td></tr><tr><td>beforeAfter</td><td>true 前置 false 后置</td></tr></tbody></table><h2 id="认领角色任务" tabindex="-1">认领角色任务 <a class="header-anchor" href="#认领角色任务" aria-label="Permalink to &quot;认领角色任务&quot;">​</a></h2><blockquote><p>将所属角色任务认领给当前处理人。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">taskService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">claimRole</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taskId, flowCreator)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>当前任务ID</td></tr><tr><td>flowCreator</td><td>当前处理人</td></tr></tbody></table><h2 id="认领部门任务" tabindex="-1">认领部门任务 <a class="header-anchor" href="#认领部门任务" aria-label="Permalink to &quot;认领部门任务&quot;">​</a></h2><blockquote><p>将所属部门任务认领给当前处理人。</p></blockquote><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowLongEngine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">taskService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">claimDepartment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(taskId, flowCreator)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>taskId</td><td>当前任务ID</td></tr><tr><td>flowCreator</td><td>当前处理人</td></tr></tbody></table>',54)]))}const b=a(i,[["render",r]]);export{k as __pageData,b as default};
